#!/usr/bin/make -f

export DH_VERBOSE=1
export PREFIX=/usr

%:
	dh ${@}

override_dh_auto_build:
	dh_auto_build
	pwd
	ls -la
	if [ ! -f docs/Makefile ]; then git submodule init && git submodule update; fi
	mkdir -p docs/sources
	if [ ! -d docs/sources/syndicate-dataset-manager ]; then cd docs/sources && git config --global http.sslVerify false && git clone https://github.com/syndicate-storage/syndicate-dataset-manager; cd -; fi
	cd docs && $(MAKE) -C docs docs

override_dh_auto_install:
	dh_auto_install
	cd docs && $(MAKE) -C docs installman DESTDIR=$(CURDIR)/debian/syndicate-dataset-manager PREFIX=$(PREFIX)/share
